<!DOCTYPE html>
<html lang="ko">
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta name="description" content="" />
	<meta name="author" content="" />
	<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
	<title>Web Sockets</title>
  
  <script>
    function init() {
      if (window.WebSocket) {
        const socket = new WebSocket('ws://localhost:3000');
        
        socket.onopen = () => {
          console.log('connected');
        };

        socket.onmessage = async (e) => {
          const data = await e.data.text();
          document.getElementById('content').innerHTML = `<p>${data}</p>`;
        };

        socket.onerror = (e) => {
          console.error('connect error');
        };
        
        socket.onclose = () => {
          console.log('disconnected');
        };

      } else {
        console.error('WebSocket is not supported.');
      }
    }
  </script>
</head>
<body onload="init()">
  <div id="content"></div>
</body>
</html>